{
    "$schema": "../../../../schemas/data-init.schema.json",
    "version": "1.0.0",
    "defs": [
        {
            "name": "users-importer",
            "files": ["users.csv"],
            "type": "csv",
            "csvOptions": {
                "entity": "User",
                "encoding": "utf8",
                "checkColumns": ["code"]
            }
        },
        {
            "name": "roles-importer",
            "files": ["roles.csv"],
            "type": "csv",
            "csvOptions": {
                "entity": "Role",
                "encoding": "utf8",
                "checkColumns": ["name"],
                "cardinalRelations": [
                    {
                        "cardinality": "many-to-many",
                        "targetEntity": "User",
                        "targetKeyColumn": "$user",
                        "targetKeyField": "code",
                        "sourceKeyColumn": "name",
                        "sourceRelationField": "users"
                    }
                ]
            }
        },
        {
            "name": "logins-importer",
            "files": ["logins.csv"],
            "type": "csv",
            "csvOptions": {
                "entity": "Login",
                "encoding": "utf8",
                "checkColumns": ["username"],
                "cardinalRelations": [
                    {
                        "cardinality": "one-to-one",
                        "targetEntity": "User",
                        "targetKeyColumn": "$user",
                        "targetKeyField": "code",
                        "sourceKeyColumn": "username",
                        "sourceRelationField": "user"
                    }
                ]
            }
        }
    ]
}
